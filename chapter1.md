---
title: 计算机系统概论
description: 计算机系统概论Asdfjjskdfjklsdjfkljskld
---

# 第1章 计算机系统概论

### 本章概述

计算机系统是由**硬件**和**软件**两大部分组成的，而这本书也是围绕着两个部分进行讲解的。在硬件部分，我们需要了解计算机各个部件的结构。在软件部分，我们需要了解程序如何进行，也就是指令和数据如何发挥作用。

## 1.1 计算机系统简介

- 如下图，我们可以看到现代计算机系统的多级层次结构
  ![多级层次结构的计算机系统.png](https://i.loli.net/2019/12/08/f3SLUjklgWYBJhX.png)

- 在这里我们介绍上图的五个机器分别的功能和运作：
  最顶层的虚拟机器M4是**高级语言机器**，它的任务是将高级语言翻译成汇编语言，再将汇编语言送入机器M3。
  虚拟机器M3是**汇编语言机器**，当M2接收到汇编语言后，把汇编语言翻译成机器语言程序，送入下一级的M2。
  虚拟机器M2是**操作系统机器**。操作系统接收到上一级传送的机器语言后，机器语言可通过操作系统实现控制和管理计算机软件和硬件资源的操作。
  实际机器M1为**机器语言机器**，它的任务是接收从操作系统送来的机器指令，并用更详细的**微指令**解释机器指令。关于机器指令，我们会在第七章进行讨论，而关于微指令我们会在本书第十章详细介绍。
  M0为**微程序机器**。它的任务是接收微指令，并通过硬件执行微指令。

在这本书中，我们主要讨论的是从实际机器M1和微程序机器M0的组成原理以及设计思想。

## 1.2 计算机的基本组成

### 1.2.1 冯诺依曼计算机的特点

- 计算机由运算器、存储器、控制器、输入设备和输出设备五大部件组成。
  指令和数据以同等的地位存放于存储器内，并可按地址寻访。
  指令和数据均用二进制数表示。
  指令由操作码和地址码组成，操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置。
  指令在存储器内按顺序存放。通常指令是按顺序执行的，在特定条件下，可根据运算结果或根据设定的条件改变执行顺序。**这是冯诺依曼机器的核心特征。**
  机器以运算器为中心，输入输出设备与存储器间的数据传送通过运算器完成。

- 由下图可见，这是典型的冯诺依曼计算机结构框图。这个机器以运算器为核心，数据的输入输出必须要经过运算器，这使得运算器的工作变得繁忙，最终导致运算器成为计算机系统的瓶颈。
  ![典型的冯诺依曼计算机结构框图.png](https://i.loli.net/2019/12/08/EGHWpkfTKuY8MVC.png)

### 1.2.2 计算机的硬件框图

- 由上面典型的冯诺依曼计算机系统我们看到，运算器成为了制约计算机系统的瓶颈。因此我们对其进行了结构上的改进，于是就有了以存储器为中心的计算机结构。
  ![以存储器为核心的计算机结构框图.png](https://i.loli.net/2019/12/08/gTRiAJ3WNSEr2ec.png)

- 在这里我们可以看到，冯诺依曼计算机的五大部件，分别是**运算器**、**存储器**、**控制器**、**输入设备和输出设备**。

### 1.2.3 现代计算机的结构

- 现代计算机系统经过多年的发展，运算器和控制器到后面就集成在同一芯片上，它们合起来之后就统称**中央处理器(CPU)**。另外，我们把输入输出设备也统称为**I/O设备**。

- 如下图所示，现代计算机可认为由三大部分组成：**CPU**、**I/O设备**以及**主存储器**。CPU和主存合起来可称为**主机**，I/O设备可称为**外部设备**。
  ![现代计算机的组成框图.png](https://i.loli.net/2019/12/08/VkoC94smyOJDEwR.png)

- 下面我们来依次介绍这五大部件的结构和功能。下面的介绍只是大致的介绍，目的是帮助同学们对计算机各部件的结构及功能有大致的了解，具体的介绍及细节请同学们翻看书本或其他章节的知识见解。

### 1.2.4 运算器的结构与功能

- 运算器用来完成**算术运算**和**逻辑运算**，并将运算的中间结果暂时存在运算器里。而对于运算器的结构我们需要了解进位器的结构。

- 首先我们要了解计算机是如何表示数的，下图给出了各种数的分类以及要注意的概念。
  **真值**是**机器数**所代表的的真实值，机器数就是把真值的符号"数字化"的数。
  由于无符号数只能表示非负数，实际上可被有符号数代替。因为有符号数表示的范围更广，所有我们后面所有的讨论都是基于有符号数的。
  **定点数**表示的小数，只能表达绝对值小于1的小数。
  **浮点数**由**阶码**和**尾数**组成。为了提高浮点数的精度，其尾数必须为规格化数。浮点数在表示范围、数的精度、溢出处理和程序编程方面均优于定点数。但在运算规则、运算速度及硬件成本方面不如定点数。
  ![image.png](https://i.loli.net/2019/12/28/4FhpEPNytRGnmA3.png)

- 除了计算机中数的分类，我们还要了解机器数的四种表示法：**原码**、**补码**、**反码**、**移码**。

- 了解完计算机如何表示数，下面我们来了解计算机中的运算。如下图为计算机数据运算的体系。
  因为补码加减运算规则简单且易于实现，因此定点数的加减法普遍采用补码的加减法。
  定点数的**乘法和除法**运算实际上是由多次的移位运算、加法运算和构成的。
  **浮点数**的加减法总共分五步进行，分别是**对阶**、**尾数求和**、**规格化**、**舍入**和溢出判断。
  ![image.png](https://i.loli.net/2019/12/17/o9vBq3tEJMAY7Ui.png)

### 1.2.5 控制器的结构与功能

- 控制器用来控制指挥程序和数据的输入、运行以及处理运算的结果,而这里所指的的控制器就是**控制单元(CU)**。这里的控制器和运算器共同构成CPU。计算机之所以能自动协调的工作，是由于控制单元的统一指挥。

- 对计算机而言，一旦程序进入存储器后，就可由计算机自动完成取指令和执行指令的任务，控制器就是专用于此项工作的。控制器主要负责协调并控制计算机各部件执行程序的指令序列，其基本功能是**取指令**、**分析指令**和**执行指令**。

- 下图展示的是CPU的内部结构。**ALU**、**寄存器**、**中断系统**和**CU**分别构成了CPU的四大部分。
  **ALU**负责完成算术运算和逻辑运算，内含有存放操作数的寄存器。
  **寄存器**负责存放各种数据。
  **中断系统**负责处理异常情况和特殊请求。
  **CU**负责对指令进行移码，并发出各种操作命令序列。
  ![CPU内部结构.png](https://i.loli.net/2019/12/08/LtZD16FK3IbdURi.png)

- CPU中的寄存器大致可分为两类：一类是**用户可见寄存器**，用户可对这类寄存器编程，通过优化让CPU因使用这类寄存器而减少对主存的访问次数。另一类属于**控制和状态寄存器**，用户不可对这类寄存器编程，它们被控制部件使用，以控制CPU的操作，也可以被带有特权的操作系统程序使用，从而控制程序的执行。
  ![image.png](https://i.loli.net/2019/12/16/SrwHRql5UJXMZWf.png)

- 控制单元具有发出各种微操作命令(即控制信号)序列的功能。计算机执行程序的过程中 ，控制单元要发出各种微操作命令，不同的机器指令对应不同的指令。
  如下图，控制单元接收的输入信号有：**时钟信号**、**指令寄存器的指令**、**标志(CPU当前所处的状态)**和**来自系统总线(控制总线)的控制信号**；控制单元的输出信号有**CPU内的控制信号**和**送至系统总线(控制总线)的信号**。
  现代计算机的CPU都集成在一个硅片内，在芯片内采用**内部总线**的方式可节省芯片内寄存器之间的连线，使芯片内各个部件布局更合理。
  ![image.png](https://i.loli.net/2019/12/13/CkMRsntZULYQiFG.png)

- **机器周期**可看作是所有指令执行过程中的一个基准时间。
  **时钟周期**是控制计算机操作的最小时间单位，每个节拍的宽度证号对应一个时钟周期。
  **机器周期**、**节拍(状态)**组成了**多级时序系统**。下图反映了指令周期、机器周期、节拍(状态)的关系。一个指令周期包含若干个机器周期，一个机器周期包含若干个时钟周期(节拍)，每个指令周期内的机器周期可以不等，每个机器周期内的节拍数也可能不等。
  ![指令周期、机器周期、节拍和时钟周期的关系.png](https://i.loli.net/2019/12/08/1eJshQdzV5YbDy7.png)

- 控制单元控制一条指令执行的过程，实质上是一次执行一个确定的**微操作序列**的过程。如何形成控制不同微操作序列所采用的时序控制方式称为**CU的控制方式**。常见的控制方式有**同步控制**、**异步控制**、**联合控制**和**人工控制**。

- 控制单元有两种设计方法，分别是**组合逻辑设计**和**微程序设计**。不同的设计方法，使得控制单元内部的结构不同，但最终输出的控制信号是一样的。
  **组合逻辑设计**的思想是：根据指令微操作的节拍安排，列出微操作命令的操作时间表，然后写出每一个微操作命令(控制信号)的逻辑表达式，最后根据逻辑表达式画出相应的组合逻辑电路。这种设计模式的缺点是随着微操作命令增多，线路更复杂，测试更困难。
  **微程序设计**的出现克服了组合逻辑设计线路复杂的缺点。其设计思想是：把一条机器指令编写成一个微程序，每个微程序包含若干条微指令，每条微指令对应一个或多个微操作命令。

### 1.2.6 存储器的结构与功能

- 存储器是计算机系统中的记忆设备，用来存放程序和数据。这部分重点介绍主存储器的分类、工作原理、组成方式以及与其他部件(如CPU)的联系。
- 存储器的种类繁多，从不同的角度对存储器可作不同的分类。本书介绍的分类方式有按存储介质分类、按存储方式分类和按在计算机的作用分类。
  按**存储介质**分类，存储器可分为半导体存储器、磁表面存储器、磁芯存储器和光盘存储器。
  按**存取方式分**类，存储器可分为随机存储器、只读存储器、顺序存取存储器和直接存取存储器。
  按**在计算机中的作用**分类，存储器只要分为主存储器、辅助存储器、和缓冲存储器。
  综上所述，存储器分类如下图所示。
  ![存储器分类.png](https://i.loli.net/2019/12/08/3mX8fjonlqud9Hy.png)

- 存储器的**层次结构**主要体现在**Cache-主存**和**主存-辅存**这两个层次结构上。
  缓存-主存层次主要解决CPU和主存速度不匹配的问题。
  主存-辅存层次主要解决存储系统的容量问题。
  ![存储器的层次.png](https://i.loli.net/2019/12/08/RnLeK1OSq6M3Jhk.png)

- 如下图，**主存储器**包括存储体和各种逻辑部件及控制电路等。而存储体是有多个半导体存储芯片组成的，半导体存储芯片的译码驱动方式有**线选法**和**重合法**。
  ![主存的基本组成.png](https://i.loli.net/2019/12/08/j1lakuxcMWDvUV9.png)

- **随机存取存储器**是构成主存的重要存储器，按其存储信息原理的不同，可分为**静态RAM**和**动态RAM**。
  **静态RAM**是用触发器工作原理来存储信息的，属于易失性半导体存储器。
  **动态RAM**是靠电容存储电荷的原理寄存信息。电容上的电荷一般只能维持有限时间，因此即使电源不掉电，其存储的信息也会自动消失。因此，动态RAM会对其所有存储单元回复一次原状态，这个过程将成为**刷新**。刷新通常的三种方式为**集中刷新**、**分散刷新**、**异步刷新**。
  目前，动态RAM的应用比静态RAM更广泛。其原因有：动态RAM的集成度远高于静态RAM、动态RAM芯片引脚和封装尺寸更少、动态RAM功耗更小，价格更低。因此动态RAM广泛用于计算机主存。
  另一方面，静态RAM速度快于动态RAM且不需要刷新。因此，静态RAM通常用于缓冲存储器。

- **只读存储器**是构成计算机主存的另一重要部分。其类型有无法改变原始状态的只读存储器**掩模ROM**、一次性编程的只读存储器**PROM**、可擦除可编程的只读存储器**EPROM**、可局部擦写和全部擦写的**EEPROM**等。

- 前面提到的主存储器的存储体，还有多篇存储芯片组成的。若干存储芯片连载一起，称为**存储容量的扩展**，扩展方式有**位扩展**、**字扩展**和**字、位同时扩展**。在扩展过程中，存储芯片与CPU相连。其中片与片之间的**地址线**、**数据线**和**控制线**的连接是存储容量扩展的重点和难点。

- 书本介绍了多种**提高访存速度**的措施，分别是采用高速器件、采用层次结构以及调整主存结构。而提到的主存结构分别有**单体多字系统**、**多体并行系统**。
  另外，采用高性能存储芯片也是提高访存速度的措施之一。书中介绍了三种芯片，分别是**SDRAM**、**RDRAM**以及**带Cache的DRAM**。

- Cache-主存是计算机存储器的另一个重要的层次结构。Cache的出现使CPU可以不直接诶访问主存，而与高速Cache交换信息，解决了主存与CPU速度不匹配的问题。
  Cache和主存地址的映射方式分为**直接相连**、**全相联映射**以及**组相联映射**。
  当主存块需要调入Cache并且它的可用空间位置又被占满时，需要替换掉Cache的数据，这就产生了相应的替换策略，比如**先进先出算法**、**近期最少使用算法**和**随机法**。

### 1.2.7 I/O设备的结构与功能

- 输入和输出设备在后续的发展中被归类为**I/O设备**。输入输出系统设计的内容及其繁杂，既包括具体的各类I/O设备，有包括各种不同的I/O设备如何与主机交换信息。本章重点分析I/O设备与主机交换信息的三种控制方式，及其相应的接口功能和组成。

- I/O设备和CPU连接，靠的是**I/O接口**。I/O接口通常是指主机与I/O设备之间设置的一个硬件电路及其相应的软件控制。
  I/O接口的结构是根据不同功能和控制方式决定的。I/O接口的功能有**选址**、**传送命令**、**传送数据**、**反应I/O设备工作状态**。
  下图为I/O接口的基本组成。
  ![IO接口的基本组成.png](https://i.loli.net/2019/12/12/7pdQVRsFgNi4c28.png)

- 在I/O设备在和主机传送信息时，有多种**控制方式**，本书只讲三种，分别是**程序查询方式**、**程序中断方式**和**DMA方式**。
  **程序查询方式**是由CPU通过不断查询I/O设备是否已做好准备，从而控制I/O设备与主机交换信息。
  **程序中断方式**指的是CPU在启动I/O设备后，不再查询设备是否已准备就绪，CPU选择继续执行自身程序。只有当I/O设备准备就绪并向CPU发出中断请求后才予以响应。
  **DMA方式**指的是I/O设备直接与主存交换信息而不占用CPU。对前两种方法来说，I/O的信息都必须经过CPU才能到达主存。对比前两种方法，DMA方法提高了CPU的资源利用率。

### 1.2.8 总线的结构与功能

- **总线**是连接上述这么多个部件的信息传输线，是各部件共享的传输介质。总线实际上是又许多传输线或通路组成，二进制代码就是通过总线传输的。

- 总线可分为三类，分别是:
  **片内总线**是指芯片内部的总线。
  **系统总线**是指CPU、主存、I/O设备各大部件之间的信息传输线。系统总线根据系统总线传输的信息分为：**数据总线**、**地址总线**和**控制总线**。
  **通信总线**是连接不同计算机系统或计算机与其他系统的总线。
- 总线结构通常可分为**单总线结构**和**多总线结构**。
- 总线上连接这多个部件，部件之间如何协调工作需要由总线控制器统一管理。管理的内容主要包括**判优控制**和**通信控制**。
  **总线判优控制**是指当多个设备同时要是用总线时，总线控制器要按一定的优先等级顺序确定哪个主设备能使用总线。
  **总线通信控制**主要解决通信双方如何获知传输开始和传输结束，以及通信双方如何协调如何配合。
  下图是总线控制的分类图
  ![QQ浏览器截图20191212162009.png](https://i.loli.net/2019/12/12/sxCV9WUEczNbe32.png)

### 1.2.9 计算机的指令系统

- 计算机是连续执行每一条机器语句而实现全自动工作的。而这每一条机器语言的语句称为指令，全部机器指令的集合称为机器的**指令系统**。因此机器指令系统集中反映了机器的功能。

- 指令是由**操作码**和**地址码**两部分组成。操作码的长度可以是固定的，也可以是变化的。由于操作码长度不固定会增加指令译码和分析的难度，因此通常采用**扩展操作码技术**，使操作码长度对地址数的减少而增加。
- 指令字长取决于**操作码的长度**、**操作数地址的长度**和**操作数地址的个数**。不同机器的指令字长是不同的。
  机器中操作数的类型有**地址**、**数字**、**字符**和**逻辑数据**等。
  不同的机器，操作类型也是不同的，但几乎所有机器都有如所展示的下图操作。
  ![image.png](https://i.loli.net/2019/12/12/cbdiunJU4HTLV6S.png)

- 寻址方式是指确定本条指令的数据地址以及下一条将要执行的指令地址的方法，主要分为指令寻址和数据寻址两大类。
  指令寻址指的是寻找下一条指令的地址，它分为**顺序寻址**和**跳跃寻址**两种。
  指令寻址的方式种类较多，因此在指令字中必须设一个字段来指明是哪一种寻址方式。书上介绍的寻址方式有立即寻址、直接寻址、隐含寻址、间接寻址、寄存器寻址、寄存器间接寻址、基址寻址、变址寻址、相对寻址和堆栈寻址。

- 指令格式集中体现了指令系统的功能。在确定指令格式时，应从以下五个方面综合考虑：操作类型、数据类型、指令格式、寻址方式和寄存器个数。

- RISC即精简指令系统计算机，与其对应的是CISC，即复杂指令系统计算机。与CISC相比，RISC机的主要优点有：充分利用VLSI芯片的面积、提高计算机运算速度、便于设计、有效支持高级程序语等。
  RISC的主要特点有：
  复杂指令的功能有频率高的简单指令的组合来实现。
  指令长度固定，指令格式种类少，寻址方式种类少。
  只有取数、存数指令访问存储器，其余指令操作都在寄存器内完成。
  CPU中有多个通用寄存器。
  采用流水线技术，大部分指令在一个时钟周期内完成。采用超标量和超流水线技术，可是每条指令的平均执行时间小于一个时钟周期。
  控制器采用组合逻辑控制，不用微程序控制
  采用优化的编译程序。

- CPU每取出并执行一条指令所需的全部时间称为**指令周期**，也即CPU完成一条指令的时间。
  由于各种指令操作功能不同，因此各种指令的指令周期是不相同的。一个完整的指令周期应该包括**取值**、**间址**、**执行**和**中断**这四个子周期。

- 取值周期操作如下：
  现行指令地址送至存储器地址寄存器，记为PC→MAR。
  向主存发送读命令，启动主存作读操作，记作1→R。
  将MAR(通过地址总线)所指的主存单元中的内容(指令)经数据总线读到MDR内，记作M(MDR)→MDR.
  将MDR的内容送至IR，记作MDR→IR。
  取回来的指令的操作码送至CU，记作OP(IR)→CU。
  形成下一条指令的地址，记作(PC)+1→PC。

![取址周期数据流.png](https://i.loli.net/2019/12/08/2VhHpwN4ZxWultb.png)

- 间址周期完成取操作数有效地址的任务，操作如下：
  将指令的地址码部分(形式地址)送至存储器地址寄存器，记作Ad(IR)→MAR。
  向主存发送读命令，启动主存作读操作，记作1→R。
  将MAR(通过地址总线)所指的主存单元中的内容(有效地址)经数据总线读至MDR内，记作M(MAR)→MDR。
  将有效地址送至指令寄存器的地址字段，记作MDR→Ad(IR)。这个操作在有些机器中可省略。

![间址周期数据流.png](https://i.loli.net/2019/12/08/uQClYRG7HJAsq6F.png)

- 执行周期
  不同指令的执行周期的微操作是不同的，非访存指令、访存指令和转移指令的指令周期各自不同。这里就不再赘述了。

- 中断周期
  在指令执行周期结束的时刻，CPU要查询是否有中断请求，如果有则进入中断周期。要注意，中断周期是为中断服务程序做准备的。中断周期的操作如下：
  将特定地址"0"送至存储器地址寄存器，记作0→MAR。
  向主存发写命令，启动存储器作写操作，记作1→W。
  将PC的内容(程序断点)送至MDR，记作PC→MDR。
  将MDR的内容(程序断点)通过数据总线写入到MAR(通过地址总线)所指示的主存单元(0地址单元)，记作MDR→M(MAR)。
  将向量地址形成部件的输出送至PC，记作向量地址→PC，为下一条指令的取值周期作准备。
  关中断，将允许中断触发器清零，记作0→EINT(该操作课直接由硬件线路完成)。
  因此整个中断周期要做的事情有:**保护断点**、**寻找中断服务程序的入口地址**、**软件关中断**。

![中断周期数据流.png](https://i.loli.net/2019/12/08/dIcSo4hV3AYj95u.png)

- 另外，中断周期后计算机进入中断服务程序。下图展示了中断服务程序的流程，在中断服务程序中计算机的操作依次为：**保护现场(保护寄存器内容)**、**设备服务**、**恢复现场**、**开中断**以及**中断返回**。
  ![image.png](https://i.loli.net/2019/12/13/Bgh6P27MbtW1An4.png)

- 整个中断过程中需要注意的有以下几点：
  各中断源是通过**中断请求触发器**向CPU发送中断请求的。这些触发器课集中设在CPU内，也可分散设置在接口内。
  CPU内的中断系统通过**中断判优逻辑**确定优先响应哪一个中断源的请求。中断判优可以用**硬件实现**，如通过链式排队器或CPU内排队器实现；也可以用**软件排队**实现，即编写查询程序实现。
  中断服务程序入口地址，指的是程序的首条指令的地址。查找中断服务程序入口地址有两种方法，分别是**硬件向量法**和**软件查询法**，实际上两种方法是和排队方式相对应的。
  中断过程中出现了新的中断请求，这种情况称为**多重中断**。其实现条件为：提前设置**开中断指令**和优先级别高的中断源有权中断优先级别低的中断源。
  为保证优先级别高的中断源课打断优先级别低的中断源，可以采用**屏蔽技术**，屏蔽技术可改变中断源的优先等级。屏蔽技术由**屏蔽触发器**和**屏蔽字**组成。

- 由上面分析我们可知，完成一条指令实际上可以分多个阶段。因此在这里我们引入**指令流水**的概念。指令流水是指，把一条指令的操作分成多个细小的步骤，每个步骤由专门的电路完成。指令相互重叠执行，大大增加了CPU的执行效率。关于指令流水我们需要关注以下几点。
  流水线过程中会出现三种相关，使流水线不断流实现起来很困难，这三种相关分别是**结构相关**、**数据相关**和**控制相关**。
  流水线的性能通常用**吞吐率**、**加速比**和**效率**三项指标来衡量。
  为了在一个时钟周期内产生更多条指令的结果，流水线中的多发技术随之发明。流水线中的多发技术分别有：**超标量技术**、**超流水线技术**和**超长指令字技术**。
  将指令的整个执行过程用流水线进行分段处理的流水线结构称为**指令流水线结构**，应用于部件级的流水技术称为**运算流水线结构**。

- 无论控制单元采用的设计模式是**组合逻辑设计**，还是**微程序设计**，所有的微操作的控制信号都是由控制单元发出的。

- 我们下面以取指周期、间址周期、中断周期为例，介绍在组合逻辑设计模式中，微操作的节拍安排。每个节拍内都可以进行一个或多个微操作，每个微操作都有对应的来自CU的控制信号。
- 取指周期的节拍安排：
  T0：PC→MAR，1→R。
  T1：M(MAR)→MDR，(PC)+1→PC。

- 间址周期的节拍安排：
  T0：Ad(IR)→MAR，1→R。
  T1：M(MAR)→MDR。
  T2：MDR→Ad(IR)。
- 不同的指令在执行周期进行的操作也不一样，因此此处就不详细介绍各条指令在执行周期所执行的微操作了。

- 中断周期的节拍安排：
  T0：0→MAR，1→W。
  T1：PC→MDR。
  T2：MDR→M(MAR)，向量地址→PC。

- **微程序设计**可以看成组合逻辑设计的升级版。其实现原理是把机器指令编写成一个微程序，一个微程序包含了若干条微指令，每条微指令对应一个或多个微操作命令。因此，多条微指令的组合即可实现多种复杂的功能，便于调试、修改和增删机器指令。
  微程序控制单元的核心部件是一个**控制存储器**。如图，每一条机器指令都与一个操作性质命名的微程序对应。
  ![image.png](https://i.loli.net/2019/12/13/Vyv4laYuwQCOiNf.png)

- 控制存储器里面存放的就是**微指令**。如下图，微指令共分两个字段，左边的为操作**控制字段**，该字段发出各种操作信号；另一个为**顺序控制**字段，负责指出下调微指令的地址，以控制微指令序列的执行顺序。
  ![image.png](https://i.loli.net/2019/12/13/F4eAvapOPDu6RcJ.png)

- 微指令的编码方式又称微指令的**控制方式**，它是指如何对微指令控制字段进行编码，以形成控制信号。编码方式主要有：**直接编码(直接控制)方式**、**字段直接编码方式**、**字段间接编码方式**、**混合编码**以及其他多种方式。

- 微指令**序列地址**的形成大致有两种方式，分别是**直接由微指令的下地址字段指出**和**根据机器指令的操作码形成**。实际上除了以上两种常用的，微指令序列地址形成方式还有**增量计数法**、**分支转移**、**通过测试网络形成**以及**由硬件产生微程序入口地址**。

- 微指令的格式与微指令的编码方式有关，通常分为**水平型微指令**和**垂直型微指令**两种。

- 完成一条微程序分为两个阶段，分别是**取微指令**和**执行微指令**，由这两个阶段产生了**串行微程序控制**和**并行微程序控制**两种运行方式。

- 微程序设计控制单元的主要任务是编写对应各条机器指令的微程序，主要步骤是先写出**对应机器指令的全部微操作及节拍安排**，然后**确定微指令格式**，最后编写出每条微指令的二进制代码，即**微指令码点**。

### 1.2.10 计算机的工作步骤

用计算机解决实际问题包括两大步骤。一个是上机前的准备，另一个是上机运行。

上机前准备的工作可以归纳为：建立数学模型、确定计算方法和编制解题程序。

上机运行则是计算机无情地执行指令的过程了。在这里我们来大致了解一下计算机是如何执行指令的。

- 例如我们通过计算机求:(*ax+b*)*x*+*c*的结果。在这里我们可以把过程分为一下步骤：
  通过键盘输入未知数x的值。
  将*x*取至运算器中。
  乘以*a*，的*ax*，存入ACC中。
  加*b*，得*ax+b*，存入ACC中。
  乘以*x*，得(*ax+b*)*x*，存入ACC中。
  加*c*，得(*ax+b*)*x*+*c*，存入ACC中。

将上述操作步骤写成计算机对应的机器指令，我们就完成了程序的编写。下一步我们要做的是让计算机执行对应的指令。

![程序指令清单.png](https://i.loli.net/2019/12/08/DpMTdE4V7K2JRsa.png)

- 由图可知，该程序有8条指令，每条指令都要经过取指、分析、执行三个阶段。因此(*ax+b*)*x*+*c*程序的运行过程如下：
  将程序通过输入设备送至计算机
  程序首地址→PC
  启动程序运行
  取第一条指令：PC→MAR→M→MDR→IR ,(PC)+1→PC
  分析指令：OP(IR)→CU
  执行指令：Ad(IR)→MAR→M→MDR→ACC
  重复进行“取指令→分析指令→执行指令”的过程，直到该程序最后一条指令执行完。
  打印结果
  停机

## 1.3 计算机硬件的主要技术指标

### 1.3.1 机器字长

机器字长是指CPU一次能处理数据的位数，通常与CPU的寄存器位数有关。字长越长，数的表示范围越大。

### 1.3.2 存储容量

存储器的容量应该包括主存容量和辅存容量。即

> 存储容量 = 存储单元个数 × 存储字长

计算机中，**MAR的位数**反映了存储器的存储单元的个数，**MDR的位数**反应了每个存储单元的存储字长。因此，我们可以通过上面两个参数求得存储容量。

### 1.3.3 运算速度

计算机的运算速度

![运算速度.png](https://i.loli.net/2019/12/08/h5vIBtm3WxKYqFk.png)

